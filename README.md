Hine 聊天软件服务器

努力开发中......

## 接口文档
#### 注册
1. 查询用户名是否已被占用
> 地址：/signup/nameinuse
>
> 请求方式：GET

参数：

| 字段 | 类型   | 说明   | 必需 |
| ---- | ------ | ------ | ---- |
| name | String | 用户名 | 是   |

返回值：

| 字段   | 类型   | 说明                      | 必需 |
| ------ | ------ | ------------------------- | ---- |
| status | int    | 状态码                    | 是   |
| msg    | String | 该用户名用户数量/错误信息 | 是   |

示例：

```json
{
    "status": 0,
    "msg": "0"
}
```

2. 查询邮箱是否已被占用

> 地址：/signup/emailinuse
>
> 请求方式：GET

参数：

| 字段  | 类型   | 说明         | 必需 |
| ----- | ------ | ------------ | ---- |
| email | String | 电子邮件地址 | 是   |

返回值：

| 字段   | 类型   | 说明                        | 必需 |
| ------ | ------ | --------------------------- | ---- |
| status | int    | 状态码                      | 是   |
| msg    | String | 该邮箱地址用户数量/错误信息 | 是   |

示例：

```json
{
    "status": 0,
    "msg": "0"
}
```

3. 注册

> 地址：/signup/adduser
>
> 请求方式：POST

参数：

| 字段  | 类型   | 说明         | 必需 |
| ----- | ------ | ------------ | ---- |
| name  | String | 用户名       | 是   |
| email | String | 电子邮件地址 | 是   |
| psw   | String | 密码         | 是   |

返回值：

| 字段   | 类型   | 说明              | 必需 |
| ------ | ------ | ----------------- | ---- |
| status | int    | 状态码            | 是   |
| msg    | String | 注册成功/错误信息 | 是   |

示例：

```json
{
    "status": 0,
    "msg": "注册成功"
}
```

#### 登录相关

1. 登录

> 地址：/signin/login
>
> 请求方式：POST

参数：

| 字段  | 类型   | 说明         | 必需   |
| ----- | ------ | ------------ | ------ |
| name  | String | 用户名       | 二选一 |
| email | String | 电子邮件地址 | 二选一 |
| psw   | String | 密码         | 是     |

返回值：

| 字段   | 类型        | 说明                                      | 必需 |
| ------ | ----------- | ----------------------------------------- | ---- |
| status | int         | 状态码，0登录成功，1错误，2账号或密码错误 | 是   |
| msg    | String/JSON | 错误信息/用户名+头像链接+token            | 是   |

示例：

```json
{
    "status": 0,
    "msg": {
    	name: 'zs',
        imgUrl: 'user.png',
        token: 'Barer xxxxx...'
    }
}
```

---

接下来的所有接口请求头都需要有token

---

2. 获取用户信息

> 地址：/signin/getuserinfo
>
> 请求方式：GET

参数：

| 请求头 | 说明  | 必需 |
| ------ | ----- | ---- |
| token  | token | 是   |

返回值：

| 字段   | 类型 | 说明                       | 必需 |
| ------ | ---- | -------------------------- | ---- |
| status | int  | 状态码                     | 是   |
| msg    | JSON | 用户信息：用户名、头像链接 | 是   |

示例：

```json
{
    "status": 0,
    "msg": {
    	name: 'zs',
        imgUrl: 'user.png'
    }
}
```

#### 搜索相关

1. 搜索用户

> 地址：/search/user
>
> 请求方式：POST

参数：

| 字段 | 类型   | 说明                   | 必需 |
| ---- | ------ | ---------------------- | ---- |
| key  | String | 用户名或邮箱地址关键词 | 是   |

返回值：

| 字段   | 类型     | 说明       | 必需 |
| ------ | -------- | ---------- | ---- |
| status | int      | 状态码     | 是   |
| msg    | 对象数组 | 关键词用户 | 是   |

示例：

```json
{
    "status": 0,
    "msg": [
        {
            _id: 'asdafafwaf'
            name: 'zs',
            email: 'zs@qq.com',
            imgUrl: 'user,png'
        },
    ]
}
```

2. 获取好友关系

> 地址：/search/relation
>
> 请求方式：POST

参数：

| 字段     | 类型   | 说明           | 必需 |
| -------- | ------ | -------------- | ---- |
| userId   | String | 当前用户id     | 是   |
| friendId | String | 查询对象用户id | 是   |

返回值：

| 字段   | 类型   | 说明                            | 必需 |
| ------ | ------ | ------------------------------- | ---- |
| status | int    | 状态码，0是好友、2非好友、1错误 | 是   |
| msg    | String | 好友关系描述信息                | 是   |

示例：

```json
{
    "status": 2,
    "msg": '双方非好友'
}
```

3. 搜索群

> 地址：/search/group
>
> 请求方式：POST

参数：

| 字段 | 类型   | 说明         | 必需 |
| ---- | ------ | ------------ | ---- |
| key  | String | 群名称关键词 | 是   |

返回值：

| 字段   | 类型     | 说明       | 必需 |
| ------ | -------- | ---------- | ---- |
| status | int      | 状态码     | 是   |
| msg    | 对象数组 | 关键词群组 | 是   |

示例：

```json
{
    "status": 0,
    "msg": [
        {
            _id: 'jafhkjsafwq'
            name: '幸福一家人',
            imgUrl: 'user,png'
        },
    ]
}
```

4. 查询用户是否在群内

> 地址：/search/isingroup
>
> 请求方式：POST

参数：

| 字段    | 类型   | 说明         | 必需 |
| ------- | ------ | ------------ | ---- |
| userId  | String | 当前用户id   | 是   |
| groupId | String | 查询对象群id | 是   |

返回值：

| 字段   | 类型   | 说明                                | 必需 |
| ------ | ------ | ----------------------------------- | ---- |
| status | int    | 状态码，0在群内、2非群内成员、1错误 | 是   |
| msg    | String | 群和用户关系的描述信息              | 是   |

示例：

```json
{
    "status": 2,
    "msg": '非群内成员'
}
```

